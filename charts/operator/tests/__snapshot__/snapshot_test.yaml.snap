templated manifests should match snapshot:
  1: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-schedule-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-schedule-operator-0.1.0
        rbac.authorization.k8s.io/aggregate-to-admin: "true"
        rbac.authorization.k8s.io/aggregate-to-edit: "true"
        rbac.authorization.k8s.io/aggregate-to-view: "true"
      name: release-name-azimuth-schedule-operator:edit
    rules:
      - apiGroups:
          - scheduling.azimuth.stackhpc.com
        resources:
          - '*'
        verbs:
          - '*'
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-schedule-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-schedule-operator-0.1.0
      name: release-name-azimuth-schedule-operator:controller
    rules:
      - apiGroups:
          - apiextensions.k8s.io
        resources:
          - customresourcedefinitions
        verbs:
          - '*'
      - apiGroups:
          - ""
        resources:
          - namespaces
        verbs:
          - list
          - watch
      - apiGroups:
          - ""
          - events.k8s.io
        resources:
          - events
        verbs:
          - create
      - apiGroups:
          - scheduling.azimuth.stackhpc.com
        resources:
          - '*'
        verbs:
          - '*'
      - apiGroups:
          - ""
        resources:
          - secrets
        verbs:
          - get
          - delete
      - apiGroups:
          - caas.azimuth.stackhpc.com
        resources:
          - clusters
        verbs:
          - get
          - delete
      - apiGroups:
          - azimuth.stackhpc.com
        resources:
          - clusters
        verbs:
          - get
          - delete
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-schedule-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-schedule-operator-0.1.0
        rbac.authorization.k8s.io/aggregate-to-view: "true"
      name: release-name-azimuth-schedule-operator:view
    rules:
      - apiGroups:
          - scheduling.azimuth.stackhpc.com
        resources:
          - '*'
        verbs:
          - get
          - list
          - watch
  4: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRoleBinding
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-schedule-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-schedule-operator-0.1.0
      name: release-name-azimuth-schedule-operator
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: ClusterRole
      name: release-name-azimuth-schedule-operator:controller
    subjects:
      - kind: ServiceAccount
        name: release-name-azimuth-schedule-operator
        namespace: NAMESPACE
  5: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-schedule-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-schedule-operator-0.1.0
      name: release-name-azimuth-schedule-operator
    spec:
      replicas: 1
      selector:
        matchLabels:
          app.kubernetes.io/instance: RELEASE-NAME
          app.kubernetes.io/name: azimuth-schedule-operator
      strategy:
        type: Recreate
      template:
        metadata:
          labels:
            app.kubernetes.io/instance: RELEASE-NAME
            app.kubernetes.io/name: azimuth-schedule-operator
        spec:
          containers:
            - env:
                - name: AZIMUTH_SCHEDULE_CHECK_INTERVAL_SECONDS
                  value: "60"
                - name: AZIMUTH_LEASE_CHECK_INTERVAL_SECONDS
                  value: "60"
                - name: AZIMUTH_LEASE_DEFAULT_GRACE_PERIOD_SECONDS
                  value: "600"
                - name: AZIMUTH_LEASE_BLAZAR_ENABLED
                  value: auto
              image: ghcr.io/azimuth-cloud/azimuth-schedule-operator:main
              imagePullPolicy: IfNotPresent
              name: operator
              ports:
                - containerPort: 8080
                  name: metrics
                  protocol: TCP
              resources: {}
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
              volumeMounts:
                - mountPath: /tmp
                  name: tmp
          securityContext:
            runAsNonRoot: true
          serviceAccountName: release-name-azimuth-schedule-operator
          volumes:
            - emptyDir: {}
              name: tmp
  6: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-schedule-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-schedule-operator-0.1.0
      name: release-name-azimuth-schedule-operator
    spec:
      ports:
        - name: metrics
          port: 8080
          protocol: TCP
          targetPort: metrics
      selector:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/name: azimuth-schedule-operator
      type: ClusterIP
  7: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: azimuth-schedule-operator
        app.kubernetes.io/version: main
        helm.sh/chart: azimuth-schedule-operator-0.1.0
      name: release-name-azimuth-schedule-operator
